Got it. Here is the same summary, **clean and professional, with no emojis**.

---

## Issue Summary

The website returned:

```
502 Bad Gateway
nginx/1.24.0 (Ubuntu)
```

Nginx was running correctly, but it could not reach the backend Node.js services.

---

## Root Cause

* The VPS rebooted or the PM2 daemon restarted.
* PM2 did not automatically resurrect applications on boot.
* As a result, all Node.js backend services were not running.
* Nginx attempted to proxy requests to inactive backends, resulting in a 502 Bad Gateway error.

Important clarifications:

* The applications were not deleted.
* PM2 process definitions still existed in `~/.pm2/dump.pm2`.
* PM2 startup via systemd was not enabled or had broken after an update or reboot.

---

## Debugging Steps

### 1. Identify error source

A 502 error from nginx indicates that the upstream backend service is unavailable, not that nginx itself is down.

---

### 2. Check PM2 status as the application user

```bash
pm2 status
```

Result: No running processes.

---

### 3. Check PM2 status as root (rule out user mismatch)

```bash
sudo pm2 status
```

Result: No running processes under root either.

---

### 4. Review PM2 logs

```bash
pm2 logs
```

Confirmed PM2 daemon was running but with no active applications.

---

### 5. Attempt PM2 resurrection

```bash
pm2 resurrect
```

Result:

* Applications were successfully restored from:

  ```
  /home/danishan/.pm2/dump.pm2
  ```
* All services returned to an online state immediately.

This confirmed the issue was missing or broken PM2 auto-start configuration.

---

## Final Fix (Permanent)

### 1. Save the current process list

```bash
pm2 save
```

---

### 2. Enable PM2 startup on system boot

```bash
pm2 startup
```

Run the exact command output by PM2, for example:

```bash
sudo env PATH=$PATH:/usr/bin pm2 startup systemd -u danishan --hp /home/danishan
```

---

### 3. Verify resurrection works

```bash
pm2 kill
pm2 resurrect
pm2 status
```

Applications should start automatically.

---

## Why This Happened

* PM2 only restores applications from `dump.pm2`.
* Automatic restoration requires `pm2 startup` to be configured.
* Without it, any reboot leaves PM2 running with no applications, causing nginx upstream failures.

---

## Prevention Checklist

* Use a single Linux user for PM2.
* Do not mix `pm2` and `sudo pm2`.
* Always run:

  ```bash
  pm2 save
  pm2 startup
  ```
* Test resurrection after reboots, OS updates, or Node/PM2 upgrades.

---

## Final State

* All Node.js services are running under PM2.
* Nginx is serving traffic normally.
* PM2 automatically restores applications on reboot.
* No application redeployment was required.
